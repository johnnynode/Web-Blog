### 读写文件

- 读取文件
  ```python
    f = open('my_path/my_file.txt', 'r') # open方法会返回文件对象
    file_data = f.read() # 通过read方法获取数据
    f.close() # 关闭该文件
  ```
  * 首先使用内置函数 `open` 打开文件。需要文件路径字符串。`open` 函数会返回文件对象，它是一个 Python 对象，Python 通过该对象与文件本身交互。在此示例中，我们将此对象赋值给变量 `f`。
  * 你可以在 open 函数中指定可选参数。参数之一是打开文件时采用的模式。在此示例中，我们使用 r，即只读模式。这实际上是模式参数的默认值。
  * 使用 `read` 访问文件对象的内容。该 `read` 方法会接受文件中包含的文本并放入字符串中。在此示例中，我们将该方法返回的字符串赋值给变量 `file_data`。
  * 当我们处理完文件后，使用 `close` 方法释放该文件占用的系统资源。

- 写入文件
  ```python
    f = open('my_path/my_file.txt', 'w')
    f.write("Hello there!")
    f.close()
  ```
  * 以写入 ('w') 模式打开文件。如果文件不存在，Python 将为你创建一个文件。如果以写入模式打开现有文件，该文件中之前包含的所有内容将被删除。如果你打算向现有文件添加内容，但是不删除其中的内容，可以使用附加 ('a') 模式，而不是写入模式。
  * 使用 `write` 方法向文件中添加文本。
  * 操作完毕后，关闭文件。

- `with`语法，该语法会在你使用完文件后自动关闭该文件
  ```python
    with open('my_path/my_file.txt', 'r') as f:
    file_data = f.read()
  ```
  * 该 `with` 关键字使你能够打开文件，对文件执行操作，并在缩进代码（在此示例中是读取文件）执行之后自动关闭文件。现在，我们不需要调用 `f.close()` 了！
  * 只能在此缩进块中访问文件对象 `f`。

- 在之前的代码中，`f.read()` 调用没有传入参数。它自动变成从当前位置读取文件的所有剩余内容，即整个文件。如果向 .read() 传入整型参数，它将读取长度是这么多字符的内容，输出所有内容，并使 'window' 保持在该位置以准备继续读取。
  ```python
    with open(camelot.txt) as song:
      print(song.read(2))
      print(song.read(8))
      print(song.read())
  ```

  输出：

  ```log
    We
    're the 
    knights of the round table
    We dance whenever we're able
  ```

- 读取文件下一行的方法: `f.readlines()`

- Python 将使用语法 `for line in file` 循环访问文件中的各行内容。 我可以使用该语法创建列表中的行列表。因为每行依然包含换行符，因此我使用 `.strip()` 删掉换行符。
  ```python
    camelot_lines = []
    with open("camelot.txt") as f:
        for line in f:
            camelot_lines.append(line.strip())

    print(camelot_lines) # ["We're the knights of the round table", "We dance whenever we're able"]
  ```

- 相关练习：你将创建一个演员名单，列出参演电视剧《巨蟒剧团之飞翔的马戏团》的演员。写一个叫做 `create_cast_list` 的函数，该函数会接受文件名作为输入，并返回演员姓名列表。 它将运行文件 `flying_circus_cast.txt`。文件的每行包含演员姓名、逗号，以及关于节目角色的一些（凌乱）信息。你只需提取姓名，并添加到列表中。你可以使用 `.split()` 方法处理每行。

  解决方案： 

  ```python
    def create_cast_list(filename):
        cast_list = []
        #use with to open the file filename
        #use the for loop syntax to process each line
        #and add the actor name to cast_list
        with open(filename) as f:
        # use the for loop syntax to process each line        
        # and add the actor name to cast_list
            for line in f:
                line_data = line.split(',')
                cast_list.append(line_data[0])
        return cast_list

    cast_list = create_cast_list('./txts/flying_circus_cast.txt')
    for actor in cast_list:
        print(actor)
  ```